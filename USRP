
The USRP_FMCW_Tx Matlab project uses a USRP for transmitting an FMCW radar signal. It first generates a baseband FMCW signal.  This signal is generated as in-phase and quadrature components.  A script is then used for communicating with the Tx USPRP for transmitting the FMCW signal. 
Script USRP_FMCW_Tx_streaming_main is the main script used for this project.  Simply run this script to start the project.  The variables requiring further explanation would be N_loop and N.  Variable N_loop is used when a user would only like to transmit during a finite number of loop iterations.  Variable N is the total number of sample points to use when generating the baseband FMCW message and is used in script GenFMCWRadarTxMsg.
 
The script  GenFMCWRadarTxMsg used for generating the FMCW baseband signal.  The user can define the amplitude, start frequency, stop frequency, and chirp period.  There is an additional N_delay variable for delaying the chirp pulse, but it is not currently used. The generated IQ FMCW baseband signals are stored in variables x_msg_i1,x_msg_q1, x_msg_i2 and x_msg_q2. The total number of samples contained in x_msg_i1,x_msg_q1, x_msg_i2 and x_msg_q2 are determined by the global variable N defined in USRP_FMCW_Tx_streaming_main.  Default values for N and T_chirp results in  x_msg_i and x_msg_q containing multiple periods of the FMCW chirp signal. Now Script GenFMCWRadarTxMsg used for generating FMCW signal.
There are only two USRP Tx channels that will be used when there is only one USRP being used.  These channels are CH0 and CH1.  Matlab sends data to the USRP channels as a matrix whose columns contain samples designated for each channel.  The first column contains samples destined for CH0, and the second for CH1 for a single USRP setup.  Therefore, samples sent to the USRP are formatted as seen in Array x_tx_data has CH1 containing x_msg_i1 and x_msg_q, and CH0 contains  x_msg_i2 and x_msg_q2.
After FMCW signal creation the Script USRP_FMCW_Tx_streaming_main will next call a script to create a Matlab USRP comm.SDRuTransmitter object for transmitting USRP signals.  The comm.SDRuTransmitter object created in this script is named radio_tx. In the project folder are two such scripts: USRP_Tx_config_and_create_script_B210 and USRP_Tx_config_and_create_script_X310.  Here  USRP_Tx_config_and_create_script_B210 is  called.  
This script can be used for either single or multiple USRPs.  If a single USRP is used, then its clocking circuit and PPS signal source is set to the USRP internals.  This is because no external synchronization circuit is required for a single USRP.  Multiple USRPs will have their clocking circuit and PPS signal source to ‘external’.  This configures the multiple USRPs to synchronize to the same external source to help mitigate phase errors between channels.
There are additional parameters of radio_tx that are configured in the USRP creation script
Parameter Name Parameter Description radio_tx.ChannelMapping Array mapping to every channel used by radio_tx radio_tx.Gain Array containing gain values (in dB) for each channel radio_tx.ClockSource Synchronization clock source used for USRP system radio_tx.MasterClockRate Main clock rate (in Hz) of USRP hardware radio_tx.InterpolationFactor Ratio of Main clock rate of USRP hardware to host sampling rate of computer radio_tx.TransportDataType Datatype used to represent samples contained in packets sent to USRP from computer radio_tx.EnableBurstMode Configures burst mode for sending packets from computer to USRP(0: Disable burst mode, 1: Enable burst mode) radio_tx.NumFramesInBurst Number of frames containing samples contained in each burst transmission from computer to USRP (if burst mode is enabled) .
A list of transmission options is presented by Script USRP_FMCW_Tx_streaming_main. A user can select USRP_Tx_finite_transmit to transmit for only a limited number of loop iterations determined by variable N_loop.  Otherwise, a user may select USRP_Tx_streaming_transmit_dual_channel to transmit indefinitely. A user can manually terminate USRP_Tx_streaming_transmit_dual_channel by issuing ctrl+c command in the Matlab console. It is important that Matlab release all resources allocated for interfacing with the USRP when the script USRP_FMCW_Tx_streaming_main is finished.  This is accomplished by the release(radio_tx) command .  A user may have to manually run this command in case the script crashes, or script USRP_Tx_streaming_transmit_dual_channel is manually terminated.  
 
